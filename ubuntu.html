<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ecg.vot.pl</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="css/bootstrap.min.css">

  <!-- Font Awesome, zob. How to Use: https://fontawesome.bootstrapcheatsheets.com -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- twoje style -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- brak java scriptu -->
  <noscript>
    Do pełnej funkcjonalności strony potrzebujesz włączonej obsługi skryptów.
    Tu znajdziesz <a href="https://www.enable-javascript.com/pl/" target="_blank">
    instrukcje, które pozwolą Ci włączyć skrypty w Twojej przeglądarce</a>.
  </noscript>

  <!-- nieaktualna przeglądarka, zob. dostosowanie: https://brow row_cardsser-update.org/customize.html -->
  <script>
    var $buoop = {notify:{e:-6,f:-4,o:-4,s:-2,c:-4},insecure:true,api:5};
    function $buo_f(){
      var e = document.createElement("script");
      e.src = "http://brow row_cardsser-update.org/update.min.js";
      document.body.appendChild(e);
    };
    try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
    catch(e){window.attachEvent("onload", $buo_f)}
  </script>


  <aside id="aside" role="complementary" class="js-fullheight text-center">
    <h1 id="logo">
      <a href="index.html">
        <span class="img d-none d-lg-block" style="background-image: url(images/logo_150px.png);"></span>
        ecg.vot.pl</a>
    </h1>
    <nav id="main-menu" role="navigation">
      <ul>
        <li><a href="index.html">Strona Główna</a></li>
        <li><a href="materialy.html">Materiały</a></li>
        <li><a href="linux.html">Linux</a></li>
        <li class="active"><a href="archiwum.html">Archiwum </a></li>
        <li><a href="galerie.html">Galerie</a></li>
        <li><a href="linki.html">Linki & Narzędzia</a></li>
      </ul>
    </nav>
  </aside>

  <div id="main">

      <section class="ecg-section ecg-bread">
        <div class="container">
         <div class="row">
            <div class="col-md-8">
              <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Strona główna</a></span><span class="mr-2"><a href="index.html">archiwum</a></span> <span class="mr-2"><span>Ubuntu Server 12.04 LTS</span></p>
              <h1 class="bread">Ubuntu Server 12.04 LTS</h1>
            </div>
           </div>
        </div>
      </section>

    <div style="height:150px;"></div>

	<div id="colorlib-main">
		<section class="section">
	    	<div class="container">
	    		<div class="row d-flex">
	    			<div class="col-lg-8">
	    				<div class="row">
			    			<div class="col-md-12">
      <div class="container">
        <h3 class="materials_title_archives">Założenia wstępne</h3>
        	<p>Serwer pełnił będzie funkcję routera, posiada dwa interfejsy sieciowe: eth0 (WAN, połączenie z internetem) adresowany przez DHCP, oraz eth1 (LAN, połączenie z siecią lokalną), adresowany statycznie. Na interfejsie WAN uruchomiona zostanie usługa NAT (translacja adresów). Na interfejsie LAN uruchomione zostaną następujące usługi: serwer DHCP, serwer DNS, transparentne proxy z filtracją treści WWW (Squid + Dansguardian). Konfiguracja taka może zostać zastosowana np. w szkolnych pracowniach.</p>
        	<p><b>Uwaga:</b> ponieważ Ubuntu oparte jest na Debianie, powyższe procedury konfiguracyjne stosują się również do tego systemu, przynajmniej w wersji Wheezy, którą z powodzeniem udało się wdrożyć.</p>
        <h3 class="materials_title_archives">Instalacja Ubuntu Server 12.04 LTS</h3>
        <h4 class="materials-title">Pobranie obrazu i przygotowanie nośnika instalacyjnegoS</h4>
        	<p>Z podanego adresu: http://releases.ubuntu.com/12.04 pobieramy obraz iso płyty instalacyjnej, przy czym zalecana jest wersja 64-bitowa (AMD64). Wypalamy na płycie DVD lub przygotowujemy bootowalny klucz USB.</p>
        <h4 class="materials-title">Pobranie obrazu i przygotowanie nośnika instalacyjnego</h4>

        <p>Po uruchomieniu komputera instalacja przebiega w następujących krokach (por. zrzuty z instalacji):</p>
        <ol>
          <li>Wybór języka, wybranie opcji "Instalacja Ubuntu Server" i potwierdzenie chęci instalacji mimo nieukończonego tłumaczenia instalatora.</li>
          <li>Wybór lokalizacji ("Polska") oraz układu klawiatury (pomijamy wykrywanie, wybieramy kraj i układ "Polski").</li>
          <li>Wskazanie podstawowego interfejsu sieciowego, czyli karty sieciowej podłączonej do internetu, oraz podanie nazwy serwera. Nazwy wykrytych kart warto zanotować.</li>
          <li>Utworzenie konta użytkownika: podanie pełnej nazwy, loginu oraz dwukrotnie hasła (najlepiej minimum 8-znakowego).</li>
          <li>Odmówienie szyfrowania katalogu domowego.</li>
          <li>Ustawienia strefy czasowej: zatwierdzenie domyślnie wybranej strefy "Europe/Warsaw".</li>
          <li>Przygotowania partycji (zobacz niżej) i zapisanie zmian na dysku.</li>
          <li>Zainstalowanie pakietów na twardym dysku.</li>
          <li>Wprowadzenie danych ewentualnego serwera proxy (zazwyczaj po prostu przechodzimy dalej).</li>
          <li>Określenia sposobu aktualizacji. Najlepiej zatwierdzić wybór domyślny, czyli "Brak aktualizacji automatycznych".</li>
          <li>Wybór zestawów (ról) oprogramowania serwerowego. Wybieramy tylko "OpenSSH Server".</li>
          <li>Zainstalowanie boot menedżera GRUB. Potwierdzamy propozycję zainstalowania w MBR (master boot record) - najprościej i najlepiej.</li>
          <li>Ponowne uruchomienie komputera.</li>
        </ol>

        <h4 class="materials-title">Przygotowanie dysku</h4>

        	<p>Z powyższych kroków najtrudniejsze niewątpliwie jest przygotowanie dysku, czyli podział na partycje. Przede wszystkim na instalację serwera Ubuntu najlepiej przeznaczyć cały dysk o pojemności np. 160 GB lub większej. Wszystko zależy od tego, z jakich usług będziemy chcieli korzystać. Jeżeli mamy do dyspozycji dwa dyski, drugi możemy przeznaczyć na katalog /srv, w którym można umieścić zasoby Samby, serwera www czy cache proxy. <br><br>
        	Podczas instalacji na początku jako sposób parycjonowania można wybrać opcję "Przewodnik - cały dysk". Po wskazaniu dysku instalator zaproponuje usunięcie wszelkich istniejących partycji i - na podstawie rozmiaru dysku - utworzenie co najmniej jednej partycji podstawowej dla katalogu głównego (/) oraz co najmniej jednej partycji logicznej na przestrzeń wymiany (swap). Tak czy inaczej w oknie podglądu układ warto przejrzeć i dostosować.</p>
	        <div class="img-archives text-center">
	          <img src="images/ubuntu_srv16.png">
	        </div>
	        <div class="img-archives text-center">
	          <img src="images/ubuntu_srv17.png">
	        </div>
	        <div class="img-archives  text-center">
	          <img src="images/ubuntu_srv18.png">
	        </div>
	        <div class="img-archives text-center">
	          <img src="images/ubuntu_srv18a.png">
	        </div>
        	<p>Po wybraniu partycji mamy możliwość usunięcia jej, określenia systemu plików, wskazania katalogu montowania, określenia etykiery czy ustawienia flagi rozruchu. Jeżeli usuniemy jakąś partycję możemy utworzyć nową podająć jej rozmiar w MB. Warto rozważyć utworzenie partycji dla następujących katalogów (zob. zrzut poniżej):</p>
        <ul>
	    	<li>katalog główny <span class="katalog"><strong>/</strong></span> - partycja podstawowa, wystarczy 10 GB, partycję można ustawić flagę rozruchu</li>
	    	<li>przestrzeń wymiany <strong>swap</strong> - partycja podstawowa, 2 razy ilość dostępnej pamięci w serwerze</li>
	    	<li><span class="katalog">/home</span> - partycja logiczna, jeżeli chcielibyśmy korzystać z udostępnianych przez NFS katalogów domowych użytkowników, to jak najwięcej z pozostałego po podziale miejsca, w przeciwnym razie wystarczy np. 20 GB</li>
	    	<li><span class="katalog">/tmp</span> - partycja logiczna, pliki tymczasowe, wystarczy np. 6 GB</li>
	    	<li><span class="katalog">/var</span> - partycja logiczna, logi systemowe, wystarczy np. 6 GB w omawianych tu zastosowaniach (!)</li>
	    	<li><span class="katalog">/srv</span> - partycja logiczna, np. 80-100 GB, katalog cache proxy, ogólnodostępne zasoby sieciowe (samba, ftp, serwer www)</li>
    	</ul>
                        <p>Oczywiście podane rozmiary są dobrane dla stosunkowo niedużego dysku (ok. 200 GB) i małej bądź średniej sieci (kilkadziesiąt maszyn), powinny więc proporcjonalnie zostać dostosowane. Ponadto są dopasowane do przedstawionej dalej konfiguracji serwera szkolnego. W praktyce konfiguracja na jednym dysku 160 GB bez problemu wystarcza do obsługi pracowni komputerowej (15 jednostek), natomiast konfiguracja dwóch dysków 500 GB + 200 GB działa jako serwer dostępowy dla szkolnej sieci składającej się z 80 jednostek bardzo dobrze i w zasadzie jest nadmiarowa. Generlanie od czegoś trzeba wyjść, żeby po obserwacji obciążenia serwera dokonać korekt.</p>
                        <div class="img-archives container text-center">
                          <img src="images/ubuntu_srv18c.png">
                        </div>
                        <p>Jeżeli partycja <span class="katalog">/srv</span> miałaby się znaleźć na drugim dysku, można ją utworzyć i zamontować po zainstalowaniu systemu.</p>

                        <!-- konfiguracja -->

                          <h3 class="materials_title_archives">Konfiguracja interfejsów sieciowych</h3>
                                    <br>
				                    <p>Po instalacji może okazać się, że nazwy interfejsów niekoniecznie odpowiadają przyjętym wyżej założeniom, tzn. eth0 to WAN, a eth1 - LAN. Po wydaniu komendy # ip addr, należy sprawdzić, jakie adresy (jeśli w ogóle) otrzymały karty sieciowe. Zakładając, że nasz serwer podłączony jest np. do routera udostępniającego internet, co najmniej jedna karta powinna otrzymać adres z DHCP. Po zidentyfikowaniu interfejsów można przystąpić do konfiguracji, której dokonuje się w pliku <span class="katalog">/etc/network/interfaces</span>:</p>
      <pre>
      auto lo
      iface lo inet loopback

      # WAN interface
      auto eth0
      iface eth0 inet dhcp

      # LAN interface
      auto eth1
      iface eth1 inet static
        address 192.168.19.1
        network 192.168.19.0
        netmask 255.255.255.0
        broadcast 192.168.19.255
        dns-nameservers 192.168.19.1
        dns-search mojadomena.org
        dns-domain mojadomena.org
      </pre>
                            <p>Adres interfesju eth0 nie musi być konfigurowany dynamicznie, można ustawić go na stałe wzorując się na konfiguracji interfejsu eth1. Jeżeli zachodzi potrzeba zmiany nazw przypisanych interfejsom, można to zrobić w pliku <span class="katalog">/etc/udev/rules.d/70-persistent-net.rules</span>, w którym wpisujemy właściwe nazwy w ciągu: <code>NAME="eth0"</code>.</p>
                            <p>Po zapisaniu ustawień serwer trzeba zrestartować, a następnie sprawdzić, czy oba interfejsy otrzymały poprawne adresy (<code>ip addr</code>).</p>

                            <!-- Dnsmasq  -->

                            <h3 class="materials_title_archives">Dnsmasq (serwer DHCP i DNS)</h3>
							<br>

                            <h3 class="materials_title">Instalacja</h3>

                            <p><code>sudo apt-get install dnsmasq</code></p>

                            <h3 class="materials_title">Konfiguracja</h3>
                              <br>
                              <p>Wszystkie ustawienia znajdują się w pliku <span class="katalog">/etc/dnsmasq.conf</span>, chociaż moglibyśmy umieścić je w osobnych plikach w katalogu <span class="katalog">/etc/dnsmasq.d</span>. Konfiguracja funkcjonalności serwera DHCP i DNS (cache) dla sieci lokalnej na interfejsie eth1 o adresie 192.168.19.1 przedstawia się następująco:</p>

      <pre>
        domain-needed
        bogus-priv
        filterwin2k
        # nie korzystaj z pliku /etc/resolv.conf
        no-resolv
        # serwery Open DNS (lub naszego ISP)
        server=208.67.222.222
        server=208.67.220.220
        # nasza domena
        local=/mojadomena.org/
        # nasłuchuj na interfejsie
        interface=eth1
        expand-hosts
        domain=mojadomena.org
        # zakres adresów
        dhcp-range=192.168.19.100,192.168.19.200,255.255.255.0,12h
        # przykład rezerwacji adresów stałych
        dhcp-host=00:1E:33:49:0E:C2,stacja1,192.168.19.14,12h
        # dodatkowe opcje
        dhcp-option=3,192.168.19.1 # adres routera
        # Opcje dla Samby w roli PDC jeżeli korzystamy
        #dhcp-option=19,0           # opcja ip-forwarding off
        #dhcp-option=44,0.0.0.0     # WINS server(s)
        #dhcp-option=45,0.0.0.0     # netbios datagram distribution server
        #dhcp-option=46,8           # netbios node type (hybrid)
        dhcp-option=vendor:MSFT,2,1i # zwalnianie przydzielonego adresu DHCP
        # serwer autorytatywny
        dhcp-authoritative
        cache-size=200
      </pre>
                              <p>W opcjach <em>server</em> podano adresy serwerów Open DNS, ale można podać oczywiście inne. Pozostałe ustawienia są bardzo dobrze opisane w oryginalnym pliku konfiguracyjnym (warto zrobić jego kopię).</p>
                              <p>Aby wszystko działało, trzeba jeszcze pamiętać o dwóch rzeczach. W pliku <span class="katalog">/etc/dhcp/dhclient.conf</span>:</p>
      <pre>
        supersede domain-name "mojadomena.org";
        prepend domain-name-servers 127.0.0.1;
      </pre>
                              <p>	Natomiast w pliku <span class="katalog">/etc/hosts</span>, który dnsmasq propaguje do wszystkich klientów, powinna znaleźć się linia definiująca adres naszego routera (i ewentualnie serwera Samby):</p>
      <pre>
        #127.0.1.1 mojserwer.mojadomena.org mojserwer #to zakomentowujemy
        192.168.19.1 mojserwer.mojadomena.org mojserwer
      </pre>
                              <p>Dnsmasq zużywa o wiele mniej zasobów niż tandem ISC DHCP + ISC Bind, jest też, jak widać, prostszy w konfiguracji. Przydzielone adresy przejrzymy za pomocą polecenia: <code>cat /var/lib/misc/dnsmasq.leases</code></p>
                              <p>Usługę uruchamiamy standardowo, tzn. <code>sudo service dnsmasq start</code>.</p>

                              <!-- Routing i firewall -->

                              <h3 class="materials_title_archives">Routing i firewall</h3>

                              <br>


                              <p>Routing, a zarazem firewall zrealizowane zostaną za pomocą <strong>iptables</strong>. Ponieważ będziemy korzystać z usługi NAT, w pliku <span class="katalog">/etc/sysctl.conf</span> trzeba odkomentować opcję: <code>net.ipv4.ip_forward=1</code>. Zanim uruchomimy pełną konfigurację firewalla, warto utworzyć prosty skrypt testowo-awaryjny. W pliku <span class="katalog">/etc/mojserwer/testf.sh</span> (nazwy katalogu i pliku można zmienić) wpisujemy:</p>
	  <pre class="f10">#!/bin/bash
	  INTIF="eth1"
	  INTNET="192.168.19.0/24"
	  INTIP="192.168.19.254"
	  EXTIF="eth0"
	  EXTIP="`/sbin/ifconfig $EXTIF | grep 'inet addr' | awk '{print $2}' | sed -e 's/.*://'`"
	  UNIVERSE="0.0.0.0/0"

	  iptables -P INPUT ACCEPT
	  iptables -F INPUT
	  iptables -P OUTPUT ACCEPT
	  iptables -F OUTPUT
	  iptables -P FORWARD ACCEPT
	  iptables -F FORWARD
	  iptables -F -t nat

	  if [ "`iptables -L | grep droplog`" ]; then
	     iptables -F droplog
	  fi
	  iptables -X
	  iptables -Z

	  # Włączenie routowania
	  iptables -t nat -A POSTROUTING -o $EXTIF -j MASQUERADE
	  iptables -A FORWARD -i $EXTIF -o $INTIF -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
	  </pre>
                              <p>Nadajemy plikowi prawo do wykonania: <code>sudo chmod a+x /etc/mojserwer/testf.sh</code>. Teraz możemy uruchomić firewall: <code>sudo sh /etc/mojserwer/testf.sh</code> – i sprawdzić, czy hosty podpięte do interfejsu LAN mogą połączyć się z internetem. Powyższy skrypt zezwala na każdy ruch sieciowy, należy więc wykorzystywać go tylko do testów lub w sytuacjach awaryjnych (ewentualne problemy z firewallem).</p>
                              <p>Właściwy firewall zapiszmy w pliku <span class="katalog">/etc/mojserwer/firewall.sh</span> (nazwę pliku można zmienić):</p>
      <pre class="f10">#!/bin/bash
      echo -e "Reguły iptables...\n\n"
      # Nazwa interfejsu LAN, adres sieci LAN i adres IP interfejsu LAN
      INTIF="eth1"
      INTNET="192.168.19.0/24"
      INTIP="192.168.19.1"
      # Nazwa interfejsu WAN i jego adres IP
      EXTIF="eth0"
      EXTIP="`/sbin/ifconfig $EXTIF | grep 'inet addr' | awk '{print $2}' | sed -e 's/.*://'`"

      UNIVERSE="0.0.0.0/0"

      # Odkomentowana opcja w /etc/sysctl.conf, więc tu może być zakomentowane
      #echo 1 &gt; /proc/sys/net/ipv4/ip_forward

      # Wyczyszczenie wszystkich łańcuchów i reguł, określenie domyślnej polityki odrzucania pakietów (DROP).
      iptables -P INPUT DROP
      iptables -F INPUT
      iptables -P OUTPUT DROP
      iptables -F OUTPUT
      iptables -P FORWARD DROP
      iptables -F FORWARD
      iptables -F -t nat
      if [ "`iptables -L | grep drop-and-log-it`" ]; then
         iptables -F drop-and-log-it
      fi
      iptables -X
      iptables -Z

      # Utworzenie łańcucha drop-and-log-it.
      iptables -N drop-and-log-it
      iptables -A drop-and-log-it -j LOG --log-level info
      iptables -A drop-and-log-it -j REJECT

      # Reguły INPUT
      # Wszystkie połączenia z localhost
       iptables -A INPUT -i lo -j ACCEPT
      # Odrzucenie połączeń podszywających się pod lokalne
       iptables -A INPUT -i $EXTIF -s $INTNET -d $UNIVERSE -j drop-and-log-it
      # Protokół ICMP
       iptables -A INPUT -i $INTIF -p icmp -s $INTNET -d $UNIVERSE -j ACCEPT
       iptables -A INPUT -i $EXTIF -p icmp -s $UNIVERSE -d $EXTIP -j ACCEPT
      # Połączenia zwrotne do serwera maskarady na interfejsie LAN
       iptables -A INPUT -i $INTIF -s $INTNET -d $INTIP -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
      # Komunikaty ICMP: ping i echo
       iptables -A INPUT -i $INTIF -p tcp -s $INTNET -d $UNIVERSE --dport 7 -j ACCEPT
       iptables -A INPUT -i $INTIF -p udp -s $INTNET -d $UNIVERSE --dport 7 -j ACCEPT
      # Zapytania DNS
       iptables -A INPUT -i $INTIF -p tcp -s $INTNET -d $UNIVERSE --dport 53 -j ACCEPT
       iptables -A INPUT -i $INTIF -p udp -s $INTNET -d $UNIVERSE --dport 53 -j ACCEPT
      # Zapytania DHCP
       iptables -A INPUT -i $INTIF -p udp --dport 67 -j ACCEPT
      # Usługi Samby (jeżeli korzystamy, odkomentować)
      # iptables -A INPUT -i $INTIF -p tcp -s $INTNET -d $UNIVERSE --dport 135 -j ACCEPT
      # iptables -A INPUT -i $INTIF -p tcp -s $INTNET -d $UNIVERSE --dport 139 -j ACCEPT
      # iptables -A INPUT -i $INTIF -p tcp -s $INTNET -d $UNIVERSE --dport 445 -j ACCEPT
      # iptables -A INPUT -i $INTIF -p udp -s $INTNET -d $UNIVERSE --dport 137 -j ACCEPT
      # iptables -A INPUT -i $INTIF -p udp -s $INTNET -d $UNIVERSE --dport 138 -j ACCEPT
      # Protokół SSH
       iptables -A INPUT -i $INTIF -p tcp -s $INTNET -d $UNIVERSE --dport 22 -j ACCEPT

      # Serwer proxy Squid na interfejsie LAN, port 3128
      # iptables -A INPUT -i $INTIF -p tcp --dport 3128 -j ACCEPT

      # Squid3 transparent bez Dansguardiana
      # iptables -t nat -A PREROUTING -i $INTIF -p tcp --dport 80 -j REDIRECT --to-ports 3128

      # Dansguardian + Squid3 transparent proxy
       iptables -A INPUT -i $INTIF -p tcp --dport 8080 -j ACCEPT
       iptables -t nat -A PREROUTING -i $INTIF -p tcp --dport 80 -j REDIRECT --to-ports 8080

      # Połączenia przychodzące na interfejs WAN
      # Połączenia zwrotne do serwera maskarady na interfejsie WAN
       iptables -A INPUT -i $EXTIF -s $UNIVERSE -d $EXTIP -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
      # Komunikaty ICMP: ping i echo.
       iptables -A INPUT -i $EXTIF -p tcp -s $UNIVERSE -d $EXTIP --dport 7 -j ACCEPT
       iptables -A INPUT -i $EXTIF -p udp -s $UNIVERSE -d $EXTIP --dport 7 -j ACCEPT

      # Odrzucanie i logowanie wszystkich innych połączeń przychodzących
       iptables -A INPUT -s $UNIVERSE -d $UNIVERSE -j drop-and-log-it

      # Reguły OUTPUT
      # Odrzucanie połączeń do sieci LAN z WAN
       iptables -A OUTPUT -o $EXTIF -s $UNIVERSE -d $INTNET -j drop-and-log-it
      # Wszystkie połączenia localhost
       iptables -A OUTPUT -o lo -j ACCEPT
      # Zezwolenie dla LAN
       iptables -A OUTPUT -o $INTIF -d $INTNET -j ACCEPT
      # Zezwolenie na DHCP reply typu broadcast - dla MS Visty
        iptables -A OUTPUT -o $INTIF -p udp -s $INTIP --sport 67 -d $UNIVERSE --dport 68 -j ACCEPT
      # Zezwolenie dla WAN
       iptables -A OUTPUT -o $EXTIF -j ACCEPT

      # Odrzucanie i logowanie wszystkie innych połączeń wychodzących
       iptables -A OUTPUT -s $UNIVERSE -d $UNIVERSE -j drop-and-log-it

      # FORWARD: Włączenie routowania, tj. usługi NAT, zwanej maskaradą, czyli IMPASQ.
      # Routing na interfejsie WAN
       iptables -t nat -A POSTROUTING -o $EXTIF -j MASQUERADE
      # Routowanie ustanowionych połączeń
       iptables -A FORWARD -i $EXTIF -o $INTIF -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT

      # Odblokowanie poszczególnych usług
      # Protokół ICMP
       iptables -A FORWARD -i $INTIF -p icmp -j ACCEPT
      # Porty wysokie
       iptables -A FORWARD -i $INTIF -p tcp --dport 1024:65535 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p udp --dport 1024:65535 -j ACCEPT
      # Komunikaty ICMP: ping, echo
       iptables -A FORWARD -i $INTIF -p tcp --dport 7 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p udp --dport 7 -j ACCEPT
      # Usługa DNS
       iptables -A FORWARD -i $INTIF -p tcp --dport 53 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p udp --dport 53 -j ACCEPT
      # Protokół SSH
       iptables -A FORWARD -i $INTIF -p tcp --dport 22 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p udp --dport 22 -j ACCEPT

      # HTTP-FORWARD-OK
      # HTTP -- jeżeli nie korzystamy ze squida i dansguardiana, trzeba odkomentować:
      # iptables -A FORWARD -i $INTIF -p tcp --dport 80 -j ACCEPT
      # iptables -A FORWARD -i $INTIF -p udp --dport 80 -j ACCEPT

      # HTTPS
       iptables -A FORWARD -i $INTIF -p tcp --dport 443 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p udp --dport 443 -j ACCEPT
      # FTP
       iptables -A FORWARD -i $INTIF -p tcp --dport 20:21 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p udp --dport 21 -j ACCEPT
      # Poczta: smtp, pop3, imap, legacy secure SMTP, smtp Submission, imap ssl, pop3s
       iptables -A FORWARD -i $INTIF -p tcp --dport 25 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p tcp --dport 110 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p tcp --dport 143 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p tcp --dport 465 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p tcp --dport 587 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p tcp --dport 993 -j ACCEPT
       iptables -A FORWARD -i $INTIF -p tcp --dport 995 -j ACCEPT

      # Odrzucanie i logowanie wszystkich pozostałych połączeń.
       iptables -A FORWARD -j drop-and-log-it

      echo -e "Zakończono!\n\n"
      </pre>
                              <p>Plikowi należy nadać prawa do wykonywania: <code>chmod a+x /etc/mojserwer/firewall.sh</code>. Aby reguły były wczytywane podczas startu systemu w pliku /etc/rc.local dopisujemy:</p>
                              <pre> cd /etc/mojserwer/./init_firewall.sh</pre>
                              <p>Nie jest to metoda optymalna, ale skuteczna. Firewall można też zrestartować np. po zmianach) czy uruchomić ręcznie: <code>sh /etc/rc.local</code>.</p>
                              <p>W przedstawionej koniguracji zdefiniowany został dodatkowy łańcuch "drop-and-log-it", do którego trafiają pakiety niepasujące do reguł połączenia. Domyślnie wszystkie te wpisy trafiają do logu systemowego <span class="katalog">/var/log/syslog</span> poprzedzone przedrostkiem "droplog:". Lepiej jednak zapisywać je w osobnym pliku, co ułatwia ewentualną póxniejszą analizę. Torzymy więc plik <span class="katalog">/etc/rsyslog.d/20-iptables.conf</span> i wpisujemy:</p>
  <pre>  :msg, contains, "droplog: " -/var/log/iptables.log&amp; ~</pre>
                              <p>– dzięki czemu usługa <strong>rsyslog</strong> odpowiedzialna za logowanie przekieruje wpisy do pliku <span class="katalog">/var/log/iptables.log</span>. Pozostaje jeszcze utworzenie pliku <span class="katalog">/etc/logrotate.d/iptables</span> z zawartością:</p>
  <pre>/var/log/iptables.log {
  	daily
  	rotate 4
  	compress
  	delaycompress
  	missingok
  }
  </pre>
                              <p>– co zabezpieczy nas przed niekontrolowanym rozrastaniem się logu firewalla. Raz na dzień log zostanie zachowany w spakowanej kopii, po czym utworzony zostanie nowy pusty plik.</p>

                              <!-- squid -->

                              <h3 class="materials_title_archives">Squid (serwer proxy)</h3>
				                      <h3 class="materials_title">Instalacja</h3>
                                <br>
                              <p>Squid ma bardzo wiele zastosowań, my użyjemy go w roli serwera proxy, który wykorzystując cache przyśpiesza pobieranie danych z internetu. Instalujemy odpowiedni pakiet: <code>sudo apt-get install squid3</code></p>
                              <h3 class="materials_title">Konfiguracja</h3>
                              <br>
                              <p>Przed utworzeniem pliku konfiguracyjnego warto zmienić nazwę oryginalnego pliku, który zawiera opis wszystkich opcji, natomiast właściwy plik utworzyć od początku:</p>
                              <p>	<code>sudo mv /etc/squid3/squid.conf /etc/squid3/squid.conf.org<br>
                            	sudo touch /etc/squid3/squid.conf</code></p>
                              <p>	Do utworzonego pliku (squid.conf) wpisujemy:</p>
	  <pre>
	  acl all src
	  acl manager proto cache_object
	  acl localhost src 127.0.0.1/32 ::1
	  acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1
	  acl localnet src 192.168.19.0/24 #Opis sieci LAN
	  acl LAN src 192.168.19.0/24 #Opis sieci LAN
	  acl safeports port 21 70 80 210 280 443 488 563 591 631 777 873 901 81 3128 1025-65535
	  acl sslports port 443 563 81 873 2087 10000
	  acl purge method PURGE
	  acl connect method CONNECT

	  follow_x_forwarded_for allow localhost

	  http_access allow manager localhost
	  http_access deny manager
	  http_access allow purge localhost
	  http_access deny purge
	  http_access deny !safeports
	  http_access deny CONNECT !sslports
	  http_access allow localhost
	  http_access allow localnet
	  http_access allow LAN
	  http_access deny all

	  icp_access allow localnet
	  icp_access deny all

	  # Normalny proxy
	  # http_port 3128
	  # Transparent proxy
	  http_port 3128 intercept

	  # Rozmiar cache'u
	  cache_mem 256 MB # rozmiar dodatkowej(!) pamięci dla squida
	  maximum_object_size_in_memory 512 KB
	  memory_replacement_policy heap GDSF
	  cache_replacement_policy heap LFUDA
	  cache_dir aufs /srv/cache 8000 14 256
	  maximum_object_size 16 MB
	  cache_swap_low 93
	  cache_swap_high 97

	  # Logi
	  access_log /var/log/squid3/access.log
	  cache_log  /var/log/squid3/cache.log
	  cache_store_log none
	  logfile_rotate 5
	  log_icp_queries off

	  # TIMEOUTS
	  forward_timeout 240 second
	  connect_timeout 30 second
	  peer_connect_timeout 5 second
	  read_timeout 600 second
	  request_timeout 60 second
	  shutdown_lifetime 10 second
	  </pre>
                              <p>Bliżej przyjrzeć się trzeba opcji <strong>cache_dir</strong>. Dwie pierwsze ustawienia to ścieżka do katalogu cache i rozmiar tego katalogu w MB. Najlepsze efekty można osiągnąć umieszczając ten katalog na drugim dysku, na specjalnie wydzielonej partycji. W takim wypadku trzeba później do pliku <span class="katalog">/etc/fstab</span> dopisać polecenie zamontowania tej partycji, np. w lokalizacji <span class="katalog">/home/cache</span>. Prostszym, ale zadowalającym rozwiązaniem jest utworzenie katalogu cache na tym samym dysku co system, najlepiej na wydzielonej parycji, np.: <span class="katalog">/srv</span>, którą utworzono podczas instalacji. Można również utworzyć cache w katalogu <span class="katalog">/home</span>, np.:</p>
	  <pre>
	    sudo mkdir /home/cache
	    sudo chmod 777 /home/cache         # uprawnienia do zapisu
	    sudo chown proxy:proxy /home/cache # ustawienia właściciela i grupy
	  </pre>
                              <p>Niezależnie od przyjętej lokalizacji, pamiętać trzeba, żeby squid miał do niej pełne uprawnienia (uprawnienia 777 w powyższym przykładzie są nawet nadmiarowe). Katalog cache trzeba następnie zainicjować: <code>sudo squid3 -z</code>.</p>
                              <p>Domyślnie squid nasłuchuje na porcie 3128, jeżeli więc chcemy przetestować działanie usługi w skrypcie firewalla musi znaleźć się linia:</p>
      <pre>
          iptables -A INPUT -i $INTIF -p tcp --dport 3128 -j ACCEPT
      </pre>
                              <p>Wtedy można ręcznie wpisać do przeglądarki na maszynie z LANu adres serwera proxy, czyli w naszym przypadku 192.168.19.1 i sprawdzić, czy można przeglądać internet. Jeżeli wszystko działa i mamy zamiar zainstalować Dansguardiana, wpis w firewalla można zakomentować i cały ruch przekierować do niego (zob. następny artykuł).</p>
                              <p>Zarządzanie usługą: <code>sudo service squid3 start [restart/stop]</code>.</p>

                              <!-- Dansguardian -->

                              <h3 class="materials_title_archives">Dansguardian (filtrowanie treści)</h3>
				                      <h3 class="materials_title">Instalacja</h3>
                              <p><code>sudo apt-get install dansguardian</code></p>
                              <h3 class="materials_title">Konfiguracja</h3>
                              <br>
                              <p>W pliku <span class="katalog">/etc/dansguardian/dansguardian.conf</span> zmieniamy niewiele:</p>
	  <pre>
	    language = 'polish'
	    filterip =192.168.19.1 #ip, na którym ma nasłuchiwać dansguardian
	    # zakomentowujemy linie zaczynającą się:
	    #accessdeniedaddress = 'http://YOURSERVER.YOURDOMAIN...'
	    forwardedfor = on
	  </pre>
                              <p>	Ostatnia opcja umożliwia wgląd w źródłowe IP klienta. W pliku <span class="katalog">/etc/dansguardian/dansguardianf1.conf</span> opisującym domyślną grupę użytkowników (czyli wszystkich) ustalamy reguły filtrowania:</p>
      <pre>
        naughtynesslimit = 150 #ustawienie wrażliwości filtra
      </pre>
                              <p>	Dansguardian domyślnie nasłuchuje na porcie 8080, możemy więc konfigurować proxy ręcznie w przeglądarkach wybranych klientów. Wygodniejszym rozwiązaniem jest jednak puszczenie całego ruchu przez filtr automatycznie. W skrypcie firewalla muszą się wtedy znaleźć się dwie linie:</p>
      <pre>
        iptables -A INPUT -i $INTIF -p tcp --dport 8080 -j ACCEPT
        iptables -t nat -A PREROUTING -i $INTIF -p tcp --dport 80 -j REDIRECT --to-ports 8080
      </pre>
                              <p>	– które przekierowują cały ruch http do Dansguardiana. Dodatkowo można zablokować, tzn. nie otwierać w omawianej konfiguracji portu 3128, na którym nasłuchuje Squid, żeby uniemożliwić użytkownikom obchodzenie filtra.</p>
                              <p>	Dostrojenia blokowanych treści dokonujemy w listach zawartych w katalogu <span class="katalog">/etc/dansguardian/lists</span>. Już na początku warto zmienić kilka ustawień:</p>
                              <ul>
                              	<li><code>bannedextensionlist</code> – warto odblokować (czyli zakomentować) rozszerzenia występujące w plikach często pobieranych z sieci, np.: .exe, .js, .jse, .msi, .doc, .xls, .ppt, .gz, .tgz, .bz2, .zip, .rar, .mp3, .iso, .ogg, .wmf</li>
                              	<li><code>bannedmimetypelist</code> – odblokować (czyli zakomentować) zawartość archiwów: application/gzip, #application/x-gzip, application/zip</li>
                              	<li><code>bannedsitelist</code> – tu dopisujemy strony, które chcemy w całości zablokować, np.: facebook.com</li>
                              	<li><code>bannedurllist</code> – strony, które chcemy zablokować częściowo, np.: members.home.net/uporn</li>
                              	<li><code>exceptionfilesitelist</code> – strony, z których można pobierać pliki, np. serwery obsługujące aktualizacje Windows: windowsupdate.microsoft.com, download.windowsupdate.com itp.</li>
                              	<li><code>exceptioniplist</code> – tu można dopisać adresy IP komputerów z sieci LAN, których nie należy filtrować, np. komputery z księgowości itp.</li>
                              	<li><code>exceptionsitelist</code> – strony, na które w całości zezwalamy, np.: update.microsoft.com, watson.microsoft.com, archive.ubuntu.com, ftp.pl.debian.org, archlinux.org</li>
                              	<li><code>greysitelist</code> – w listach "grey" wpisujemy strony, dla których wyłączamy filtrowanie URL, ale zachowujemy filtrowanie treści, czyli można je przeglądać pod warunkiem, że dany zasób nie zawiera czegoś niedozwolonych, np.: wp.pl, onet.pl, interia.pl, gazeta.pl</li>
                              </ul>
                              <p>Uruchomienie usługi: <code>sudo service dansguardian start</code>.</p>

                              <!-- Monitoring -->

                              <h3 class="materials_title_archives">Monitoring</h3>
                              				<p>Uwaga: większość z omawianych tu poleceń wymaga uprawnień administratora, w systemie Ubuntu polecenia poprzedzamy sudo, w Debianie przechodzimy na konto rootai uzywamy czystych poleceń lub konfigurujemy sudo.</p>
                              <h3 class="materials_title_archives">Zarządzanie usługami</h3>
                              <p>
                              	W systemach Ubuntu, Debian:</p>
                              <ul>
                              	<li><code>sudo service dansmasq start [restart, stop]</code></li>
                              	<li><code>sudo service squid3 start [restart, stop]</code></li>
                              	<li><code>sudo service dansguardian start [restart, stop]</code></li>
                              </ul>
                              <p>Można też używać skryptu invoke-rc.d lub wywoływać ręcznie skrypty z katalogu <span class="katalog">/etc/init.d</span>.</p>
                              <h3 class="materials_title_archives">	Logi</h3>
                              <ul>
                              	<li><code>sudo tail -f /var/log/squid/iptables.log</code></li>
                              	<li><code>sudo tail -f /var/log/squid/access.log</code></li>
                              	<li><code>sudo tail -f /var/log/dansguardian/access.log</code></li>
                              	<li><code>sudo tail -f /var/log/squid/syslog</code></li>
                              	<li><code>cat /var/misc/dnsmasq.leases</code> - podgląd dzierżaw DHCP</li>
                              </ul>
                              <p>Zamiast śledzenia logów (<code>tail -f</code>), można wyświetlić koniec logu: <code>sudo tail -n100 /var/log/...</code>, cały log podglądniemy używając polecenia cat: <code>cat /var/log/...</code>. Możemy też przeszukać log i wyświetlić tylko linie zawierające interesujące nas słowo: <code>cat /var/log/syslog | grep error</code>.</p>
                              <h3 class="materials_title_archives">	Narzędzia</h3>
                              <h3 class="materials_title_archives">Podstawowe</h3>
                              <ul>
                              	<li><code>ps -ef [-eF, axf, aux]</code> - wyświetlenie procesów w różnych formatach</li>
                              	<li><code>lsof -i -n -P</code> - wyświetlenie połączeń sieciowych</li>
                              	<li><code>netstat -tuap</code> - wyświetlenie połączeń sieciowych</li>
                              	<li><code>vmstat 5</code> - wyświetlanie statystyk użycia pamięci, przestrzeni wymiany itd. w odstępach 5-sekundowych</li>
                              </ul>
                              <h3 class="materials_title_archives">Zaawansowane</h3>
                              <p>Przedstawione poniżej narzędzia wymagają znajomości zagadnień funkcjonownia sieci, m. in. wiedzy na temat wykorzystywanych protokołów (model TCP/IP), pojęć (np. pakiet, gniazdo, port) i technik (np. skanowanie portów, przechwytywanie pakietów) itp. Co do zasady należy uruchamiać je z uprawnieniami administratora, czyli w Ubuntu Server przez sudo, w Debianie jako root. Instalacja:</p>
                              <p><code>sudo apt-get install iptraf vnstat tcpdump tshark nmap</code></p>
                              <h3 class="materials_title_archives">Iptraf</h3>
                              <p>Narzędzie pokazujące ruch i statystyki na wybranych interfejsach.</p>
                              <h3 class="materials_title_archives">Vnstat</h3>
                              <p>Usługa mierząca ruch sieciowy, wyświetla różnego rodzaju statystyki pozwalające ocenić stopień użycia łącza, np. <code>vnstat -h[-d|-w|-m]</code> - statystyki godzinne, dzienne, tygodniowe, miesięczne.</p>
                              <h3 class="materials_title_archives">Tcpdump</h3>
                              <p>Pozwala przechwytywać i analizaować pakiety sieciowe. Bardzo przydatny w rozwiązywani problemów z niedziałajacymi usługami sieciowymi.</p>
                              <ul>
                              	<li><code>tcpdump -D</code> - lista interfejsów</li>
                              	<li><code>tcpdump [-A] -i eth1 tcp port 80 [-w plik]</code> - nasłuchiwanie na wskazanym interfejsie pakietów http, opcja -A pokaże zawartość pakietów, opcja -w plik zapisuje pakiety do pliku, z którego można je później wczytać (-r), plik taki może być również analizowany w programie Wireshark.</li>
                              	<li><code>tcpdump -i eth1 host mojhost and mojserwer</code> - śledzenie ruchu między wskazanymi hostami</li>
                              	<li><code>tcpdump -i eth1 src 192.168.1.2 and tcp dst port 80</code> - logowanie pakietów z podanego hosta kierowanych na port 80</li>
                              	<li><code>tcpdump -i eth1 src 192.168.1.2 and dst port 80 and tcp\[13\] == 2</code></li>
                              	<li><code>sudo tcpdump -i eth1 src 192.168.1.2 and dst port 80 and tcp\[tcpflags\]=tcp-syn</code> - przechwytywanie pakietów z ustawioną flagą SYN, poprzedni przykład prezentuje możliwość badania wskazanych bitów w nagłówkach warstwy tcp</li>
                              	<li><code>tcpdump -i eth1 -w zrzut.dmp \(tcp or udp\) and \(dst port 137 or dst port 138 or dst port 139\)</code> - logowanie, tym razem do pliku (-w plik) pakietów NetBIOS</li>
                              	<li><code>tcpdump -i eth1 icmp</code> - logowanie komunikacji protokołu icmp</li>
                              	<li><code>tcpdump -i eth1 icmp[0]=0</code> - logowanie tylko komunikatów echo replay</li>
                              	<li><code>-v, -vv, -vvv</code> - przełączniki zwiększające szczegółowość informacji logowanych przez tcpdump</li>
                              	<li><code>-xX</code> - pokazywanie zawartości pakietu w formacie heksadecymalnym</li>
                              </ul>
                              <h3 class="materials_title_archives">Tshark</h3>
                              <p>TShark - czyli konsolowa wersja programu Wireshark. Narzędzie podobne do tcpdump, ale przyjaźniejsze, jeśli chodzi o analizowanie przechwyconych danych.</p>
                              <ul>
                              	<li><code>tshark -D</code> - lista interfejsów</li>
                              	<li><code>tshark -i eth1 tcp port 80 and host 192.168.1.4</code> - nasłuchiwanie na wskazanym interfejsie pakietów http od wskazanego hosta</li>
                              </ul>
                              <p>W Ubuntu Server po instalacji TSharka można umożliwić uruchamianie go z konta zwykłego użytkownika. W tym celu wydajemy następujące polecenia:</p>
                              <pre>
                                sudo groupadd wireshark
                                sudo usermod -a -G wireshark nasz_user
                                sudo dpkg-statoverride --add root wireshark 750 /usr/bin/dumpcap
                                sudo chgrp wireshark /usr/bin/dumpcap
                                sudo chmod 750 /usr/bin/dumpcap #ewentualnie
                                sudo setcap CAP_NET_RAW,CAP_NET_ADMIN,CAP_DAC_OVERRIDE+eip /usr/bin/dumpcap
                              </pre>
                              <p>	Po przelogowaniu się nasz_user może uruchamiać TSharka bez sudo.</p>
                              <h3 class="materials_title_archives">Nmap</h3>
                              <p>	Bardzo przydatny w sieci lokalnej skaner otwartych portów czy uruchomionych usług.</p>
                              <ul>
                              	<li>	<code>nmap -v -sT localhost [192.168.1.0/24]</code> - wykrywanie otwartych portów na lokalnym hoście albo w całej sieci</li>
                                <li>Inne opcje: <code>-v -sS</code> - skanowanie TCP SYN; <code>-v -sF</code> - skanowanie TCP FIN; <code>-v -O</code> - skanowanie UDP; <code>-v -sR</code> - skanowanie TCP RPC</li>
                              </ul>
                              <p>	&nbsp;</p>

                              <!-- Dokumentacja -->

                              <h3 class="materials_title_archives">Dokumentacja (Linux jako serwer)</h3>
                              				<p>Oto lista zasobów, z których warto skorzystać podczas konfigurowania i zarządzania nie tylko systemem Ubuntu Server 12.04 LTS, ale również Debianem Wheezy przeznaczonym do obsługi średniej sieci lokalnej:</p>
                              <ul>
                              	<li><a href="https://help.ubuntu.com/community/IptablesHowTo">Iptables HowTo</a></li>
                              	<li><a href="https://help.ubuntu.com/community/Router">Router</a></li>
                              	<li><a href="https://help.ubuntu.com/community/dhcp3-server">Dhcp3-server</a></li>
                              	<li><a href="http://www.thekelleys.org.uk/dnsmasq/doc.html">Dnsmasq</a></li>
                              	<li><a href="http://dansguardian.pl/index.php?s=instalacja-5-minutowa">DansGuardian | Internet bez pornografii</a></li>
                              	<li><a href="http://lani78.wordpress.com/2012/07/22/setting-up-a-dns-for-the-local-network-on-the-ubuntu-12-04-precise-pangolin-server/">Setting Up DNS Server for the local network</a></li>
                              	<li><a href="http://wioowszkole.org/mediawiki/index.php/SRU/Serwer">SRU/Serwer – Wioowszkole</a> - gotowe, działające rozwiązanie oparte na Ubuntu Server 10.04 LTS</li>
                              	<li><a href="http://lukasz.bromirski.net/docs/tutorials/tcpdump.html">Tcpdump</a> - wprowadzenie</li>
                              	<li><a href="http://www.cyberciti.biz/tips/linux-scanning-network-for-open-ports.html">Nmap</a>&nbsp;scanning</li>
                              	<li><a href="http://www.samba.org/samba/docs/using_samba/toc.html">Using Samba</a></li>
                              </ul>
                              <h3 class="materials_title_archives">Różne</h3>
                              <ul>
                              	<li><a href="http://packetlife.net/blog/2010/mar/19/sniffing-wireshark-non-root-user/">Uruchamianie TSharka (Wiresharka) z konta zwykłego użytkownika</a></li>
                              	<li><a href="http://www.pathname.com/fhs/pub/fhs-2.3.html">Hierarchia systemu plików</a></li>
                              </ul>

                    		</div>
			    		</div>
			    	</div>
			    </div>
		    	<div class="col-lg-4 sidebar  bg-light">
		            <div class="sidebar-box ">
		              <h3 class="sidebar-heading">Paragraph</h3>
		              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ducimus itaque, autem necessitatibus voluptate quod mollitia delectus aut.</p>
		            </div>

	              	<div class="sidebar-box">
		            	<h3 class="sidebar-heading">Galerie</h3>
		             		<ul class="categories">
		              			<li><a href="#">lorem <span>(10)</span></a></li>
		              			<li><a href="#">lorem <span>(10)</span></a></li>
		              			<li><a href="#">lorem <span>(10)</span></a></li>
				              	<li><a href="#">lorem <span>(10)</span></a></li>
				              	<li><a href="#">lorem <span>(10)</span></a></li>
				              	<li><a href="#">lorem <span>(10)</span></a></li>
				              	<li><a href="#">lorem <span>(10)</span></a></li>
				              	<li><a href="#">lorem <span>(10)</span></a></li>
				              	<li><a href="#">lorem <span>(10)</span></a></li>

		              		</ul>
		            </div>


		          </div>
		    	</div>
	    	</div>
	    </section>

	    <div style="height:250px;"></div>

    <footer class="footer-template">
          <div class="container px-md-5">
            <div class="row row_cards mb-5">
              <div class="col-md">
                <div class="footer-template-widget mb-4 ml-md-4">
                  <ul>
            <img src="images/logo_200px.png" class="img">
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eius</p>
                  </ul>
                </div>
              </div>
              <div class="col-md">
              </div>
              <div class="col-md">
                 <div class="footer-template-widget mb-4">
                  <h2>Przydatne linki</h2>
                  <ul>
                    <a href="http://lo1.sandomierz.pl/"><p>Strona Szkoły <i class="fa fa-angle-right g-absolute-centered--y g-right-0"></i></p></a>
                <hr>
                <a href="index.html"><p>Poczytaj <i class="fa fa-angle-right g-absolute-centered--y g-right-0"></i></p></a>
                <hr>
                <a href="materialy.html"><p>Materiały <i class="fa fa-angle-right g-absolute-centered--y g-right-0"></i></p></a>
                <hr>
                <a href="linki.html"><p>Linki & Narzędzia <i class="fa fa-angle-right g-absolute-centered--y g-right-0"></i></p></a>
                  </ul>
                </div>
              </div>
              <div class="col-md">
                <div class="footer-template-widget mb-4">
                  <h2>Kontakt</h2>
                  <div class=" mb-3">
                    <ul>
                  <li><p>ul.Jana Długosza 7</p></li>
                    <li><p>Sandomierz, Polska</p></li>
                    <p>Email: <span class="email"><b>ecg.vot@gmail.com</b></span></p>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <div class="row row_cards">
              <div class="col-md-3">
              </div>
              <div class="col-md-6">
                <p>Theme © Coding by Michał Parzych, Piotr Wojtoń • Graphics by Hubert Żuber</p>
              </div>
              <div class="col-md-3">
              </div>
            </div>
          </div>
        </footer>
    </div>

      <!-- jQuery library -->
      <script src="js/jquery-3.3.1.min.js"></script>
      <!-- Bootstrap JavaScript and Popper JS (https://popper.js.org) -->
      <script src="js/bootstrap.bundle.min.js"></script>

</body>
</html>
